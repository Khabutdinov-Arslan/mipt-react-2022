## Задание 3. Взаимодействие с сервером

В данном задании необходимо объединить компоненты, созданные на предыдущих этапах, 
с сетевыми запросами.

### Функциональные требования и разбалловка

1) **(1 балл)** При вводе текста в поисковую строку или при выборе тега с сервера подгружаются соответствующие продукты и отображаются на экране
2) **(0.5 балл)** При выборе продукта (клике по продукту) подгружается детальная информация по продукту и отображается на экране
3) **(1 балл)** При сабмите формы создания продукта отправляется запрос на его создание на сервере. После успешного выполнения запроса открывается страница/компонент с детальной информацией по продукту.
4) **(0.5 балл)** При сабмите формы редактирования продукта отправляется запрос на его обновление на сервере. После успешного выполнения запроса открывается страница/компонент с детальной информацией по продукту.
5) **(1 балл)** Для всех сетевых запросов на экране отображается процесс загрузки и информация об ошибках.

Дополнительные задания:

1) **(1 балл)** Дерево тегов также подгружается из сети и используется для отображения на UI, а также для выбора тега при создании нового продукта.

### Сроки

Задание вступает в силу с 1 Апреля, как следствие основной дидлайн его выполнения - **1 апреля**

### Сервер

Сервер поднят на домене `https://ultimate-ecommerce.v-query.com` и уже отдает все эндпойнты, 
и минимальный UI (на котором сейчас обкатываются текущие задания).

### webpack-dev-server

Для упрощения работы с сервером, советую прописать параметр `proxy` в `package.json` файле.
В этом случае запросы, которые не могут быть обработаны лоакльно, будут перенаправляться по 
указанному пути.

```json
// package.json
{
  ...
  "proxy": "https://ultimate-ecommerce.v-query.com"      
}
```

В этом случае в коде можно будет использовать относительные (без протокола и домена) пути
запросов к серверу. И гарантированно не будет проблем с cors (но на этом сервере они и так 
отключены)

### Описание эндпойнтов

#### Поиск продуктов

`GET https://ultimate-ecommerce.v-query.com/api/service-product/search?tag=<tag>&text=<text>`

Получение списка продуктов. Модель данных та же, что в предыдущих заданиях.

Query параметры:
- `tag` (optional) - key тега, по которому осуществляется поиск. Не ищет по дочерним тегам.
- `text` (optional) - произвольный текст (поисковый ввод пользователя)

Если оба параметра пусты, то сервер вернет пустой список.

#### Получение деталки продуктов

`GET https://ultimate-ecommerce.v-query.com/api/service-product/search/<usin>`

Path параметры:
- `usin` - usin искомого продукта

#### Создание продуктов

`POST https://ultimate-ecommerce.v-query.com/api/service-boarding/boarding`

```json
{
      "title": "title",
      "description": "description",
      "images": [
        "link"
      ],
      "attributes": {
        "isbn-10": "1111111111",
        "isbn-13": "111-1111111111",
        "publisher": "publisher",
        "language": "English",
        "paperback": "0 pages",
        "dimensions": "1 x 1 x 1 cm",
        "author": "author"
      },
      "ratings": [], // можно заполнить для отладочных целей или оставить пустым
      "sellOptions": [
        {
          "price": 0,
          "currency": "EUR",
          "type": "type"
        }
      ],
      "tag": "tag-key"
    }
```

response:
```json
{
  "usin": "usin"
}
```

#### Обновление продукта

`PUT https://ultimate-ecommerce.v-query.com/api/service-boarding/boarding`

```json
{
      "usin": "usin",
      "title": "title",
      "description": "description",
      "images": [
        "link"
      ],
      "attributes": {
        "isbn-10": "1111111111",
        "isbn-13": "111-1111111111",
        "publisher": "publisher",
        "language": "English",
        "paperback": "0 pages",
        "dimensions": "1 x 1 x 1 cm",
        "author": "author"
      },
      "ratings": [],
      "sellOptions": [
        {
          "price": 0,
          "currency": "EUR",
          "type": "type"
        }
      ],
      "tag": "tag-key"
    }
```

response:
```json
{
  "usin": "usin"
}
```

#### Получение тегов

`GET https://ultimate-ecommerce.v-query.com/api/service-product/tag
`

### Postman

[Postman](https://www.postman.com/) - программа для тестирования сетевых запросов.

Если GET запросы можно открыть напрямую через браузер, то для POST и PUT запросов
этот вариант может быть уже не столь удобным.

Через постман можно выполнять запросы, сохранять их параметры, сохранять 
результаты одних запросов для использования внутри других, и т.д и т.п.

### Open API documentation

Полную информацию о доступных запросах можно получить из OpenAPI документации.

У данного сервера есть две группы запросов на данный момент (по сути разные инстансы 
spring приложения): один для поиска продуктов, второй для создания и редактирования 
продуктов.

Ссылки на документацию:
- https://ultimate-ecommerce.v-query.com/api/service-product/v2/api-doc
- https://ultimate-ecommerce.v-query.com/api/service-boarding/v2/api-doc

эти документации можно импортировать в Postman для выполнения самих запросов, 
или можно использовать для кодогенерации клиентского кода.

### npm

#### react-query

`react-query` - npm библиотека для работы с асинхронными операциями 
(прежде всего сетевыми запросами) в React приложениях

#### swr

`swr` - альтернатива react-query, заточенная под работу с сетью (я не использовал, 
но своя аудитория у нее тоже есть)

#### axios

`axios` - npm библиотека, альтернатива стандартному fetch со своим api и встроенной проверкой ошибок.
Чуть более удобный/верхнеуровневый api для работы с сетью.